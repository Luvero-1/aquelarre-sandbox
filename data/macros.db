{"_id":"7k5JGRTUIUlKF2AG","name":"Pifias a Distancia","type":"script","author":"NLu8dzFBI3Kvrwky","img":"modules/game-icons-net/whitetransparent/arrowed.svg","scope":"global","command":"let table1 = game.tables.getName(\"Pifias Distancia\")\n\nlet roll1 = await table1.roll();\n\nlet content = `<p><strong>Pifia con armas a distancia</strong></p> ${roll1.results[0].data.text}<br>`\n\nChatMessage.create({content: content})","folder":null,"sort":400000,"flags":{"advanced-macros":{"runAsGM":false},"exportSource":{"world":"aquelarre","system":"sandbox","coreVersion":"0.8.6","systemVersion":"0.9.4"}},"ownership":{"default":0,"NLu8dzFBI3Kvrwky":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"8gYVRirDlUKzZv8F","name":"Pifias Pelea&Esquiva","type":"script","author":"NLu8dzFBI3Kvrwky","img":"modules/game-icons-net/whitetransparent/arm-sling.svg","scope":"global","command":"let table1 = game.tables.getName(\"Pifias Pelea&Esquiva\")\n\nlet roll1 = await table1.roll();\n\nlet content = `<p><strong>Pifia peleando o esquivando</strong></p> ${roll1.results[0].data.text}<br>`\n\nChatMessage.create({content: content})","folder":null,"sort":200000,"flags":{"advanced-macros":{"runAsGM":false},"exportSource":{"world":"aquelarre","system":"sandbox","coreVersion":"0.8.6","systemVersion":"0.9.4"}},"ownership":{"default":0,"NLu8dzFBI3Kvrwky":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"V6sd47IAiDxGi17Q","name":"Generador de pnjs","type":"script","author":"NLu8dzFBI3Kvrwky","img":"modules/game-icons-net/whitetransparent/frankenstein-creature.svg","scope":"global","command":"let table1 = game.tables.getName(\"1 - Caracteristicas\")\nlet table2 = game.tables.getName(\"2 - Características secundarias\")\nlet table3 = game.tables.getName(\"3 - Profesiones\")\nlet table4 = game.tables.getName(\"4 - Orgullos\")\nlet table5 = game.tables.getName(\"5 - Vergüenzas\")\nlet table6 = game.tables.getName(\"Nombres femeninos\")\nlet table7 = game.tables.getName(\"Nombres masculinos\")\n\nlet roll1 = await table1.roll();\nlet roll2 = await table2.roll();\nlet roll3 = await table3.roll();\nlet roll4 = await table4.roll();\nlet roll5 = await table5.roll();\nlet roll6 = await table6.roll();\nlet roll7 = await table7.roll();\n\nlet content = `\n<p><strong>Si es hombre</strong></p> ${roll7.results[0].data.text}<br> \n<p><strong>Si es mujer</strong></p> ${roll6.results[0].data.text}.<br> \n<p><strong>Características primarias</strong></p> ${roll1.results[0].data.text}<br>\n<p><strong>Características secundarias</strong></p> ${roll2.results[0].data.text}.<br>\n<p><strong>Trabaja como</strong></p> ${roll3.results[0].data.text}<br>\n<p><strong>Una cualidad destacada</strong></p> ${roll4.results[0].data.text}.<br>\n<p><strong>Un problema personal</strong></p> ${roll5.results[0].data.text}.<br>`\n\nChatMessage.create({content: content})","folder":null,"sort":500000,"flags":{"advanced-macros":{"runAsGM":false},"exportSource":{"world":"aquelarre","system":"sandbox","coreVersion":"0.8.6","systemVersion":"0.9.4"}},"ownership":{"default":0,"NLu8dzFBI3Kvrwky":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"Vd7KCgrlAKKGlUNQ","name":"Localización de daño","type":"script","author":"NLu8dzFBI3Kvrwky","img":"modules/game-icons-net/blackbackground/pierced-body.svg","scope":"global","command":"let table = game.tables.getName(\"Localización\")\n\nlet roll = await table.roll();\n\nlet content = `<p><strong>Te han dado en...</strong></p> ${roll.results[0].data.text}<br>`\n\nChatMessage.create({content: content})","folder":null,"sort":100000,"flags":{"exportSource":{"world":"aquelarre","system":"sandbox","coreVersion":"0.8.6","systemVersion":"0.9.4"}},"ownership":{"default":0,"y5gmtwxmW3A5ZuOP":3,"NLu8dzFBI3Kvrwky":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"graeqsLDcvNPV9mq","name":"Pifias C&C","type":"script","author":"NLu8dzFBI3Kvrwky","img":"modules/game-icons-net/whitetransparent/drop-weapon.svg","scope":"global","command":"let table1 = game.tables.getName(\"Pifias C&C\");\n\nlet roll1 = await table1.roll();\n\nlet content = `<p><strong>Pifia con armas cuerpo a cuerpo</strong></p> ${roll1.results[0].data.text}<br>`\n\nChatMessage.create({content: content})","folder":null,"sort":300000,"flags":{"advanced-macros":{"runAsGM":false},"exportSource":{"world":"aquelarre","system":"sandbox","coreVersion":"0.8.6","systemVersion":"0.9.4"}},"ownership":{"default":0,"NLu8dzFBI3Kvrwky":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
{"_id":"zZ4iMnuJ6XvvDCLd","name":"Falemos Vaccinator by Viriato139ac","type":"script","author":"NLu8dzFBI3Kvrwky","img":"modules/falemos/assets/img/falemos.svg","scope":"global","command":"//\n// falemos vaccinator 0.12\n// by Viriato139ac\n//\n\n// Número de jugadores y listado de nombres\n\nlet jugadores = [];\nfor (let user of game.users.keys()) {\n  // console.log(game.users.get(user).data.name)\n  jugadores.push(game.users.get(user).data.name);\n}\nconst numeroJugadores = jugadores.length;\nconst nombresJugadores = jugadores.join();\nconst numeracionJugadores = Array(jugadores.length).fill().map((element, index) => index + 1).join();\n\nlet roles = [];\nfor (let user of game.users.keys())\n  roles.push(game.users.get(user).data.role);\nconst rolesJugadores = roles.join();\n\n// Calculo de la composición óptima en base al número de jugadores, 7 jugadores = 2x4, 4 jugadores = 2x2, lo hace minimizando filas+columnas\n\nlet temp1 = [];\nlet k = 1;\nfor (let i = 0; i < numeroJugadores; i++) {\n  for (let j = 0; j < numeroJugadores; j++) {\n    temp1.push({\n      rows: i + 1,\n      columns: j + 1,\n      slots: (j + 1) * (i + 1),\n      sum: j + i + 2,\n      valid: (j + 1) * (i + 1) >= numeroJugadores,\n    });\n    k++;\n  }\n}\n\nlet temp2 = temp1.filter((nnn) => nnn.valid);\nlet temp3 = temp2.sort(function (a, b) {\n  return a.sum - b.sum || a.rows - b.rows;\n});\nconst slotsOptimo = temp3[0];\n//console.log(slotsOptimo.rows + 'x' + slotsOptimo.columns)\n\n// Cálculo de los huecos vacíos por defecto, basado en el número de jugadores y los huecos disponibles\nlet temp4 = [];\nfor (let i = numeroJugadores + 1; i <= slotsOptimo.slots; i++)\n  temp4.push(i);\nconst emptySlots = temp4.join();\n\nfunction twoDimensionArray(a, b) {\n  let arr = [];\n  for (let i = 0; i < a; i++) {\n    for (let j = 0; j < b; j++) {\n      arr[i] = [];\n    }\n  }\n  for (let i = 0; i < a; i++) {\n    for (let j = 0; j < b; j++) {\n      arr[i][j] = j;\n    }\n  }\n  return arr;\n}\n\n// Redondear 2 decimales\n\nfunction redondeardec(num) {\n  return (Math.round(num * 10000)) / 10000\n}\n\n// Esta función calcula las posiciones y anchos de los jugadores óptimas para una composición dada\n\nfunction falemosCalculator(\n  idimensiones,\n  imargenes,\n  irejilla,\n  ioverlays,\n  iseparacionminima,\n  ihuecosvacios,\n  iusers,\n  inames,\n  iorden) {\n  // 1. Lo primero creamos la composición de una rejilla perfecta con los márgenes y overlays que se han establecido\n\n  const coorini = [Number(imargenes[0]), Number(imargenes[1])];\n  const coorfin = [\n    Number(idimensiones[0]) - Number(imargenes[2]),\n    Number(idimensiones[1]) - Number(imargenes[3]),\n  ];\n  // console.log(\"Coordenadas iniciales: \" + coorini);\n  // console.log(\"Coordenadas finales: \" + coorfin);\n\n  const ventana = [400, 300];\n  const ventanalayout = [\n    ventana[0] +\n    (ventana[0] * (Number(ioverlays[0]) + Number(ioverlays[2]))) / 100,\n    ventana[1] +\n    (ventana[1] * (Number(ioverlays[1]) + Number(ioverlays[3]))) / 100,\n  ];\n  // console.log(\"Ventana: \" + ventana);\n  // console.log(\"Ventana: layout: \" + ventanalayout);\n\n  let temp1 = [];\n  for (let i = 0; i < coorfin.length; i++)\n    temp1.push(\n      (coorfin[i] -\n        coorini[i] -\n        Number(iseparacionminima) * (Number(irejilla[i]) + 1)) /\n      Number(irejilla[i]));\n  // console.log(temp1);\n  let temp2 = [];\n  for (let i = 0; i < coorfin.length; i++)\n    temp2.push(\n      (temp1[i] * ventanalayout[coorfin.length - i - 1]) / ventanalayout[i]);\n  // console.log(temp2);\n\n  const wlayoutoptimo = Math.min(temp1[0], temp2[1]);\n  const hlayoutoptimo = Math.min(temp1[1], temp2[0]);\n  //console.log(\"Layout optimo (ancho): \" + wlayoutoptimo);\n  //console.log(\"Layout optimo (alto): \" + hlayoutoptimo);\n\n  const ventanafinallayout = [\n    wlayoutoptimo,\n    (wlayoutoptimo * ventanalayout[1]) / ventanalayout[0],\n  ];\n  const ventanafinal = [\n    ventanafinallayout[0] /\n    (1 + (Number(ioverlays[0]) + Number(ioverlays[2])) / 100),\n    ventanafinallayout[1] /\n    (1 + (Number(ioverlays[1]) + Number(ioverlays[3])) / 100),\n  ];\n  //console.log(\"Ventana final layout: \" + ventanafinallayout);\n  //console.log(\"Ventana final: \" + ventanafinal);\n\n  let espacios = [];\n  for (let i = 0; i < coorfin.length; i++)\n    espacios.push(\n      (coorfin[i] - coorini[i] - ventanafinallayout[i] * Number(irejilla[i])) /\n      (Number(irejilla[i]) + 1));\n  //console.log(\"Espacios: \" + espacios);\n\n  const resultado = twoDimensionArray(\n      Number(irejilla[0]) * Number(irejilla[1]),\n      16);\n\n  let k = 0;\n  let l = 0;\n  for (let i = 0; i < irejilla[1]; i++) {\n    for (let j = 0; j < irejilla[0]; j++) {\n      let resultadoi = [\n        i + 1,\n        j + 1,\n        redondeardec(\n          coorini[0] +\n          espacios[0] * (j + 1) +\n          ventanafinallayout[0] * j +\n          (ventanafinal[0] * Number(ioverlays[0])) / 100),\n        redondeardec(\n          coorini[1] +\n          espacios[1] * (i + 1) +\n          ventanafinallayout[1] * i +\n          (ventanafinal[1] * Number(ioverlays[1])) / 100),\n        redondeardec(ventanafinal[0]),\n        redondeardec(ventanafinal[1]),\n        espacios[0],\n        espacios[1],\n        redondeardec(\n          coorini[0] +\n          espacios[0] * (j + 1) +\n          ventanafinallayout[0] * j +\n          (ventanafinal[0] * Number(ioverlays[0])) / 100 -\n          (ventanafinal[0] * Number(ioverlays[0])) / 100),\n        redondeardec(\n          coorini[1] +\n          espacios[1] * (i + 1) +\n          ventanafinallayout[1] * i +\n          (ventanafinal[1] * Number(ioverlays[1])) / 100 -\n          (ventanafinal[1] * Number(ioverlays[1])) / 100),\n        redondeardec(ventanafinallayout[0]),\n        redondeardec(ventanafinallayout[1]),\n        redondeardec(\n          ((coorini[0] +\n              espacios[0] * (j + 1) +\n              ventanafinallayout[0] * j +\n              (ventanafinal[0] * Number(ioverlays[0])) / 100) /\n            Number(idimensiones[0])) *\n          100),\n        redondeardec(\n          ((coorini[1] +\n              espacios[1] * (i + 1) +\n              ventanafinallayout[1] * i +\n              (ventanafinal[1] * Number(ioverlays[1])) / 100) /\n            Number(idimensiones[1])) *\n          100),\n        redondeardec((ventanafinal[0] / Number(idimensiones[0])) * 100),\n        redondeardec((ventanafinal[1] / Number(idimensiones[1])) * 100),\n      ];\n\n      resultado[k] = resultadoi;\n      k++;\n    }\n  }\n\n  // 2. Ahora añadimos los huecos vacíos que tendrá la composición\n\n  for (var i = 0; i < resultado.length; i++)\n    resultado[i].push(ihuecosvacios.every((num) => num !== i + 1));\n\n  let resultadoLibres = resultado.filter((arr) => arr[16] === true);\n  let resultadoLibresNulo = [\n    0,\n    0,\n    0,\n    0,\n    10,\n    10,\n    10,\n    10,\n    0,\n    0,\n    10,\n    10,\n    -100,\n    -100,\n    10,\n    10,\n    false,\n  ];\n\n  // 3. Y ahora asignamos nombres y la ordenacion. Los nombres son los que tienen que establecer el orden en el que aparecen en falemos y la variable iorden establece el\n  // orden en el lienzo y si aparecen o no (con 0 no aparecen), pero el resultado debe ser que para esos iusers tendrá unos parámetros\n\n  const iordenmax = 1 + Math.max(...iorden);\n  let iordenfix = iorden.slice(0, iusers.length);\n\n  iordenfix.forEach(function (item, i) {\n    if (item < 1)\n      iordenfix[i] = iordenmax;\n  });\n\n  if (iusers.length > iordenfix.length)\n    iordenfix = iordenfix.concat(\n        Array(iusers.length - iordenfix.length).fill(iordenmax));\n\n  var iordenfixindices = new Array(iordenfix.length);\n  for (var i = 0; i < iordenfix.length; ++i)\n    iordenfixindices[i] = i;\n  iordenfixindices.sort(function (a, b) {\n    return iordenfix[a] < iordenfix[b]\n     ? -1\n     : iordenfix[a] > iordenfix[b]\n     ? 1\n     : 0;\n  });\n  //console.log(iorden);\n  //console.log(iordenfix);\n  //console.log(iordenfixindices);\n  let inamesfix = inames.slice(0, iusers.length);\n  if (iusers.length > inamesfix.length)\n    inamesfix = inamesfix.concat(Array(iusers.length - inamesfix.length).fill(\"\"));\n\n  var resultadofinal = new Array(iusers.length);\n  for (var i = 0; i < Math.min(resultadoLibres.length, iusers.length); ++i) {\n    resultadofinal[iordenfixindices[i]] = resultadoLibres[i].concat(\n        iusers[iordenfixindices[i]], inamesfix[iordenfixindices[i]]);\n  }\n  for (var i = 0; i < resultadofinal.length; ++i) {\n    if (resultadofinal[i] === undefined || iordenfix[i] >= iordenmax)\n      resultadofinal[i] = resultadoLibresNulo.concat(iusers[i], inamesfix[i]);\n  }\n  //console.log(resultadofinal);\n\n  return resultadofinal;\n}\n\n// Aquí se comienza a definir el formulario de entrada de datos\n\nlet applyChanges = false;\nlet saveCustomMacro = false;\nlet saveDisableMacro = false;\n\nconst myDialogOptions2 = {\n  width: 800,\n  height: 800,\n  top: 500,\n  left: 500\n};\n\nnew Dialog({\n  title: `${game.i18n.localize(\"FALEMOS.vaccinator.title\")}`,\n  content: `\n  <script>\nfunction selectImage() {\n  const fp1 = new FilePicker({\n    type: \"image\",\n    button: \"image-picker\",\n    callback: (url) => {\n      $(\"#marcos\").val(url);\n    }\n  });\n  fp1.browse();\n}\n  </script>\n  <script>\nfunction selectImageMult() {\n  const fp2 = new FilePicker({\n    type: \"image\",\n    button: \"image-picker\",\n    callback: (url) => {\n      $(\"#marcos\").val() === \"\"\n       ? $(\"#marcos\").val(url)\n       : $(\"#marcos\").val([$(\"#marcos\").val(), url].join());\n    }\n  });\n  fp2.browse();\n}\n  </script>\n  <script>\nfunction simularTabla(\n  nuFilas,\n  nuColumnas,\n  orden,\n  huecos,\n  nombres,\n  usuarios,\n  roles) {\n\n  const irejilla = [nuColumnas, nuFilas];\n  const ihuecosvaciostxt = huecos.split(\",\");\n  const ihuecosvacios = ihuecosvaciostxt.map((num) => Number(num));\n  const inames = nombres.split(\",\");\n  const iordentxt = orden.split(\",\");\n  const iorden = iordentxt.map((num) => Number(num));\n  const iusers = usuarios.split(\",\");\n  const irolestxt = roles.split(\",\");\n  const iroles = irolestxt.map((num) => Number(num));\n\n  let resultado = [];\n  for (let i = 0; i < Number(irejilla[0]) * Number(irejilla[1]); i++) {\n    for (let j = 0; j < 2; j++) {\n      resultado[i] = [];\n    }\n  }\n  for (let i = 0; i < Number(irejilla[0]) * Number(irejilla[1]); i++) {\n    for (let j = 0; j < 2; j++) {\n      resultado[i][j] = j;\n    }\n  }\n\n  let k = 0;\n  for (let i = 0; i < irejilla[1]; i++) {\n    for (let j = 0; j < irejilla[0]; j++) {\n      let resultadoi = [\n        i + 1,\n        j + 1\n      ];\n      resultado[k] = resultadoi;\n      k++;\n    }\n  }\n\n  for (var i = 0; i < resultado.length; i++)\n    resultado[i].push(ihuecosvacios.every((num) => num !== i + 1));\n\n  let resultadoLibres = resultado.filter((arr) => arr[2] === true);\n  let resultadoLibresNulo = [\n    0,\n    0,\n    false\n  ];\n\n  const iordenmax = 1 + Math.max(...iorden);\n  let iordenfix = iorden.slice(0, iusers.length);\n\n  iordenfix.forEach(function (item, i) {\n    if (item < 1)\n      iordenfix[i] = iordenmax;\n  });\n\n  if (iusers.length > iordenfix.length)\n    iordenfix = iordenfix.concat(\n        Array(iusers.length - iordenfix.length).fill(iordenmax));\n\n  var iordenfixindices = new Array(iordenfix.length);\n  for (var i = 0; i < iordenfix.length; ++i)\n    iordenfixindices[i] = i;\n  iordenfixindices.sort(function (a, b) {\n    return iordenfix[a] < iordenfix[b]\n     ? -1\n     : iordenfix[a] > iordenfix[b]\n     ? 1\n     : 0;\n  });\n  let inamesfix = inames.slice(0, iusers.length);\n  if (iusers.length > inamesfix.length)\n    inamesfix = inamesfix.concat(Array(iusers.length - inamesfix.length).fill(\"\"));\n\n  var resultadofinal = new Array(iusers.length);\n  for (var i = 0; i < Math.min(resultadoLibres.length, iusers.length); ++i) {\n    resultadofinal[iordenfixindices[i]] = resultadoLibres[i].concat(\n        iusers[iordenfixindices[i]], inamesfix[iordenfixindices[i]], iroles[iordenfixindices[i]]);\n  }\n  for (var i = 0; i < resultadofinal.length; ++i) {\n    if (resultadofinal[i] === undefined || iordenfix[i] >= iordenmax)\n      resultadofinal[i] = resultadoLibresNulo.concat(iusers[i], inamesfix[i], iroles[i]);\n  }\n\n  let datostabla = [];\n  for (let i = 0; i < irejilla[1]; i++) {\n    for (let j = 0; j < irejilla[0]; j++) {\n      let datostablai = resultadofinal.filter((arr) => arr[0] === i + 1 && arr[1] === j + 1)[0];\n      if (datostablai === undefined)\n        datostablai = [i + 1, j + 1].concat([false, '', '', 0]);\n      datostabla.push(datostablai);\n    }\n  }\n\n  console.log(datostabla);\n\n  let tabla = '<table align=\"center\" style=\"margin: 0px auto;\"\">' + '\\\\n' + '<tbody>\\\\n';\n  k = 0;\n  let colorCelda;\n  for (let i = 0; i < nuFilas; i++) {\n    tabla = tabla + '<tr>\\\\n';\n    for (let j = 0; j < nuColumnas; j++) {\n      switch (datostabla[k][5]) {\n      case 1:\n        colorCelda = \"#ffffcc\";\n        break;\n      case 2:\n        colorCelda = \"#a1dab4\";\n        break;\n      case 3:\n        colorCelda = \"#41b6c4\";\n        break;\n      case 4:\n        colorCelda = \"#225ea8\";\n        break;\n      default:\n        colorCelda = \"#EC7063\";\n      }\n      if (datostabla[k][2] === true) {\n        tabla = tabla + '<td style=\"text-align:center;background-color:' + colorCelda + '\">' + 'u: ' + datostabla[k][3] + '</br>n: ' + datostabla[k][4] + '</br>r: ' + datostabla[k][5] + '</td>\\\\n';\n      } else {\n        tabla = tabla + '<td style=\"text-align:center;background-color:' + colorCelda + '\">' + '${game.i18n.localize(\"FALEMOS.vaccinator.simulateEmpty\")}' + '</td>\\\\n';\n      }\n      k++\n    }\n    tabla = tabla + '</tr>\\\\n';\n  }\n  tabla = tabla + '</tbody>\\\\n</table>';\n\n  const myDialogOptions1 = {\n    width: 640,\n    top: 500,\n    left: 500\n  };\n\n  new Dialog({\n    title: '${game.i18n.localize(\"FALEMOS.vaccinator.simulateTable\")}',\n    content: tabla,\n    buttons: {\n      yes: {\n        icon: \"<i class='fas fa-chevron-circle-left'></i>\",\n        label: '${game.i18n.localize(\"FALEMOS.vaccinator.return\")}',\n      },\n    },\n  default:\n    \"yes\",\n    close: (html) => {},\n  }, myDialogOptions1).render(true);\n}\n  </script>\n  <form>\n    <style type=\"text/css\">\n    .tg  {border-collapse:collapse;border-color:#ccc;border-spacing:0;}\n    .tg td{background-color:#fff;border-color:#ccc;border-style:solid;border-width:1px;color:#333;font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:2px 2px;word-break:normal;}\n    .tg .tg-bzmm{background-color:#34696d;border-color:#ffffff;font-family:\"Courier New\", Courier, monospace !important;;text-align:left;vertical-align:middle}\n    .tg .tg-d6y8{border-color:#efefef;font-family:\"Courier New\", Courier, monospace !important;;text-align:left;vertical-align:middle}\n    .tg .tg-ly6r{border-color:#efefef;text-align:left;vertical-align:middle}\n    .tg .tg-r5a9{background-color:#34696d;border-color:#efefef;color:#ffffff;font-family:\"Courier New\", Courier, monospace !important;;text-align:left;vertical-align:middle}\n    .tg .tg-049l{background-color:#f0f0f0;border-color:#efefef;font-family:\"Courier New\", Courier, monospace !important;;font-size:12px;text-align:left;vertical-align:middle}  \n    </style>\n    <table class=\"tg\">\n    <tbody>\n      <tr>\n        <td class=\"tg-r5a9\" colspan=\"10\"><span style=\"color:#FFF\"><b>${game.i18n.localize(\"FALEMOS.vaccinator.canvas\")}</b></span></td>\n      </tr>\n      <tr>\n        <td class=\"tg-d6y8\" colspan=\"2\">${game.i18n.localize(\"FALEMOS.vaccinator.width\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"3\"><input type=\"number\" id=\"ancho\" name=\"ancho\" min=1 value=${window.innerWidth}></td>\n        <td class=\"tg-d6y8\" colspan=\"2\">${game.i18n.localize(\"FALEMOS.vaccinator.height\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"3\"><input type=\"number\" id=\"alto\" name=\"alto\" min=1 value=${window.innerHeight}></td>\n      </tr>\n      <tr>\n        <td class=\"tg-d6y8\" colspan=\"6\">${game.i18n.localize(\"FALEMOS.vaccinator.margins\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"number\" id=\"marizq\" name=\"marizq\" min=0 value=${document.getElementById(\"controls\").clientWidth}></td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"number\" id=\"mararr\" name=\"mararr\" min=0 value=${document.getElementById(\"scene-list\") === null ? 50 : document.getElementById(\"scene-list\").clientHeight}></td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"number\" id=\"marder\" name=\"marder\" min=0 value=${document.getElementById(\"sidebar\").offsetWidth}></td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"number\" id=\"maraba\" name=\"maraba\" min=0 value=${document.getElementById(\"macro-list\").clientHeight}></td>\n      </tr>\n      <tr>\n        <td class=\"tg-049l\" colspan=\"10\"><b>${game.i18n.localize(\"FALEMOS.vaccinator.width\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.widthHint\")}; <b>${game.i18n.localize(\"FALEMOS.vaccinator.height\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.heightHint\")}; <b>${game.i18n.localize(\"FALEMOS.vaccinator.margins\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.marginsHint\")}</td>\n      </tr>\n      <tr>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.HideNavigation\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"checkbox\" id=\"cbnavigation\" name=\"cbnavigation\" value=\"ocultar\"></td>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.HideControls\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"checkbox\" id=\"cbcontrols\" name=\"cbcontrols\" value=\"ocultar\"></td>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.HidePlayers\")}:</td>\n\t\t<td class=\"tg-d6y8\" colspan=\"1\"><input type=\"checkbox\" id=\"cbplayers\" name=\"cbplayers\" value=\"ocultar\"></td>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.HideSidebar\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"checkbox\" id=\"cbsidebar\" name=\"cbsidebar\" value=\"ocultar\"></td>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.HideHotbar\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"checkbox\" id=\"cbhotbar\" name=\"cbhotbar\" value=\"ocultar\"></td>\n      </tr>\n      <tr>\n        <td class=\"tg-049l\" colspan=\"10\">${game.i18n.localize(\"FALEMOS.vaccinator.hideHint\")}</td>\n      </tr>\n      <tr>\n        <td class=\"tg-r5a9\" colspan=\"10\"><span style=\"color:#FFF\"><b>${game.i18n.localize(\"FALEMOS.vaccinator.world\")}</b></span></td>\n      </tr>\n      <tr>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.vaccinator.users\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"number\" id=\"nuusers\" name=\"nuusers\" value=${numeroJugadores} disabled></td>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.vaccinator.rows\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"number\" id=\"nRows\" name=\"nRows\" min=1 value=${slotsOptimo.rows}></td>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.vaccinator.columns\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"number\" id=\"nCols\" name=\"nCols\" min=1 value=${slotsOptimo.columns}></td>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.vaccinator.emptyslots\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"3\"><input type=\"text\" id=\"huecos\" name=\"huecos\" value=\"${emptySlots}\"></td>\n      </tr>\n      <tr>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.vaccinator.usernames\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"9\"><input type=\"text\" id=\"usuarios\" name=\"usuarios\" value=\"${nombresJugadores}\" disabled></td>\n      </tr>\n      <tr>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.vaccinator.roles\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"3\"><input type=\"text\" id=\"roles\" name=\"roles\" value=\"${rolesJugadores}\" disabled></td>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.vaccinator.playerorder\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"3\"><input type=\"text\" id=\"orden\" name=\"orden\" value=\"${numeracionJugadores}\"></td>\n        <td class=\"tg-d6y8\" colspan=\"2\"><button id=\"simular\" onclick=\"simularTabla(document.getElementById('nRows').value,\n        document.getElementById('nCols').value,\n        document.getElementById('orden').value,\n        document.getElementById('huecos').value,\n        document.getElementById('nombres').value,\n        document.getElementById('usuarios').value,\n        document.getElementById('roles').value)\" type=\"button\">${game.i18n.localize(\"FALEMOS.vaccinator.simulate\")}</button></td>\n      </tr>\n      <tr>\n        <td class=\"tg-049l\" colspan=\"10\">\n      <b>${game.i18n.localize(\"FALEMOS.vaccinator.users\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.usersHint\")}; <b>${game.i18n.localize(\"FALEMOS.vaccinator.rows\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.rowsHint\")}; <b>${game.i18n.localize(\"FALEMOS.vaccinator.columns\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.columnsHint\")}; <b>${game.i18n.localize(\"FALEMOS.vaccinator.emptyslots\")}</b>:  ${game.i18n.localize(\"FALEMOS.vaccinator.emptyslotsHint\")}; <b>${game.i18n.localize(\"FALEMOS.vaccinator.usernames\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.usernamesHint\")}; <b>${game.i18n.localize(\"FALEMOS.vaccinator.roles\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.rolesHint\")} (1: ${game.i18n.localize(\"USER.RolePlayer\")}, 2: ${game.i18n.localize(\"USER.RoleTrusted\")}, 3: ${game.i18n.localize(\"USER.RoleAssistant\")}, 4: ${game.i18n.localize(\"USER.RoleGamemaster\")}); <b>${game.i18n.localize(\"FALEMOS.vaccinator.playerorder\")}</b>:  ${game.i18n.localize(\"FALEMOS.vaccinator.playerorderHint\")}; <b>${game.i18n.localize(\"FALEMOS.vaccinator.simulate\")}</b>:  ${game.i18n.localize(\"FALEMOS.vaccinator.simulateHint\")}</td>\n      </tr>\n      <tr>\n        <td class=\"tg-r5a9\" colspan=\"10\"><b>${game.i18n.localize(\"FALEMOS.vaccinator.layout\")}</b></td>\n      </tr>\n      <tr>\n        <td class=\"tg-d6y8\" colspan=\"2\">${game.i18n.localize(\"FALEMOS.vaccinator.separation\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"2\"><input type=\"number\" id=\"sepmin\" name=\"sepmin\" min=0 value=10></td>\n        <td class=\"tg-d6y8\" colspan=\"2\">${game.i18n.localize(\"FALEMOS.vaccinator.overlays\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"number\" id=\"oveizq\" name=\"oveizq\" min=\"0\" value=\"0\"></td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"number\" id=\"ovearr\" name=\"ovearr\" min=\"0\" value=\"0\"></td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"number\" id=\"oveder\" name=\"oveder\" min=\"0\" value=\"0\"></td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"number\" id=\"oveaba\" name=\"oveaba\" min=\"0\" value=\"0\"></td>\n      </tr>\n      <tr>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.vaccinator.names\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"9\"><input type=\"text\" id=\"nombres\" name=\"nombres\" value=\"${nombresJugadores}\"></td>\n      </tr>\n      <tr>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.CameraNameFontText\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"5\"><input type=\"text\" id=\"fuente\" name=\"fuente\" value=\"url('//db.onlinewebfonts.com/t/fe2027c27b6a24505f548c6fd2e1076d.woff2') format('woff2')\"></td>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.CameraNameFontSize\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"number\" id=\"fontsize\" name=\"fontsize\" min=\"0\" value=\"2\"></td>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.CameraNameColor\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><input type=\"color\" id=\"namecolor\" name=\"namecolor\"></td>\n      </tr>\n\t\t\t<tr>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.vaccinator.frames\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"8\"><input type=\"text\" id=\"marcos\" name=\"marcos\" value=\"\"></td>\n        <td class=\"tg-d6y8\" colspan=\"1\"><button id=\"marcosSeleccionar\" onclick=\"selectImageMult()\" type=\"button\">${game.i18n.localize(\"File Path\")}</button></td>\n      </tr>\n      <tr>\n        <td class=\"tg-049l\" colspan=\"10\"><b>${game.i18n.localize(\"FALEMOS.vaccinator.separation\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.separationHint\")}; <b>${game.i18n.localize(\"FALEMOS.vaccinator.overlays\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.overlaysHint\")}; <b>${game.i18n.localize(\"FALEMOS.vaccinator.names\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.namesHint\")}; <b>${game.i18n.localize(\"FALEMOS.CameraNameFontText\")}</b>: ${game.i18n.localize(\"FALEMOS.CameraNameFontNotes\")}; <b>${game.i18n.localize(\"FALEMOS.CameraNameFontSize\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.CameraNameFontSizeHint\")}; <b>${game.i18n.localize(\"FALEMOS.CameraNameColor\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.CameraNameColorHint\")}; <b>${game.i18n.localize(\"FALEMOS.vaccinator.frames\")}</b>: ${game.i18n.localize(\"FALEMOS.vaccinator.framesHint\")}</td>\n      </tr>  \n      <tr>\n        <td class=\"tg-r5a9\" colspan=\"10\"><b>${game.i18n.localize(\"FALEMOS.vaccinator.othersettings\")}</b></td>\n      </tr>\n      <tr>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.CameraGeometryText\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"2\"><select id=\"geometria\" name=\"geometria\">\n        <option value=\"rectangle\">${game.i18n.localize(\"FALEMOS.camera.geometry.rectangle\")}</option>\n        <option value=\"circle\">${game.i18n.localize(\"FALEMOS.camera.geometry.circle\")}</option>\n        <option value=\"triangle\">${game.i18n.localize(\"FALEMOS.camera.geometry.triangle\")}</option>\n        <option value=\"rhombus\">${game.i18n.localize(\"FALEMOS.camera.geometry.rhombus\")}</option>\n        <option value=\"hexagon\">${game.i18n.localize(\"FALEMOS.camera.geometry.hexagon\")}</option>\n        <option value=\"star\">${game.i18n.localize(\"FALEMOS.camera.geometry.star\")}</option>\n        <option value=\"shield\">${game.i18n.localize(\"FALEMOS.camera.geometry.shield\")}</option>\n      </select></td>\n        <td class=\"tg-d6y8\" colspan=\"1\">${game.i18n.localize(\"FALEMOS.CameraEffectText\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"2\"><select id=\"efecto\" name=\"efecto\">\n          <option value=\"NONE\">${game.i18n.localize(\"FALEMOS.camera.effects.none\")}</option>\n          <option value=\"BW\">${game.i18n.localize(\"FALEMOS.camera.effects.bw\")}</option>\n          <option value=\"Sepia\">${game.i18n.localize(\"FALEMOS.camera.effects.sepia\")}</option>\n          <option value=\"Noise\">${game.i18n.localize(\"FALEMOS.camera.effects.noise\")}</option>\n          <option value=\"Warp\">${game.i18n.localize(\"FALEMOS.camera.effects.warp\")}</option>\n          <option value=\"Blue\">${game.i18n.localize(\"FALEMOS.camera.effects.blue\")}</option>\n          <option value=\"Red\">${game.i18n.localize(\"FALEMOS.camera.effects.red\")}</option>\n          <option value=\"Edges\">${game.i18n.localize(\"FALEMOS.camera.effects.edges\")}</option>\n          <option value=\"Green\">${game.i18n.localize(\"FALEMOS.camera.effects.green\")}</option>\n        </select></td>\n        <td class=\"tg-d6y8\" colspan=\"2\">${game.i18n.localize(\"FALEMOS.SceneFitText\")}:</td>\n        <td class=\"tg-d6y8\" colspan=\"2\"><select id=\"ajuste\" name=\"ajuste\">\n          <option value=\"nofit\">${game.i18n.localize(\"FALEMOS.scene.fit.nofit\")}</option>\n          <option value=\"cover\">${game.i18n.localize(\"FALEMOS.scene.fit.cover\")}</option>\n          <option value=\"contain\">${game.i18n.localize(\"FALEMOS.scene.fit.contain\")}</option>\n        </select></td>\n      </tr>\n      <tr>\n        <td class=\"tg-049l\" colspan=\"10\"><b>${game.i18n.localize(\"FALEMOS.CameraGeometryText\")}</b>: ${game.i18n.localize(\"FALEMOS.CameraGeometryNotes\")}; <b>${game.i18n.localize(\"FALEMOS.CameraEffectText\")}</b>: ${game.i18n.localize(\"FALEMOS.CameraEffectNotes\")}; <b>${game.i18n.localize(\"FALEMOS.SceneFitText\")}</b>: ${game.i18n.localize(\"FALEMOS.SceneFitNotes\")}</td>\n      </tr>    \n    </tbody>\n    </table>\n  </form>\n  `,\n  buttons: {\n    apply: {\n      icon: \"<i class='fas fa-check-circle'></i>\",\n      label: `${game.i18n.localize(\"FALEMOS.vaccinator.apply\")}`,\n      callback: () => {\n        applyChanges = true;\n        saveCustomMacro = false;\n        saveDisableMacro = false;\n      },\n    },\n    macrocustom: {\n      icon: \"<i class='fas fa-plus-circle'></i>\",\n      label: `${game.i18n.localize(\"FALEMOS.vaccinator.ExportCustomToMacro\")}`,\n      callback: () => {\n        applyChanges = true;\n        saveCustomMacro = true;\n        saveDisableMacro = false;\n      },\n    },\n    macrodisable: {\n      icon: \"<i class='fas fa-minus-circle'></i>\",\n      label: `${game.i18n.localize(\"FALEMOS.vaccinator.ExportDisableToMacro\")}`,\n      callback: () => {\n        applyChanges = false;\n        saveCustomMacro = false;\n        saveDisableMacro = true;\n      },\n    },\n    cancel: {\n      icon: \"<i class='fas fa-times-circle'></i>\",\n      label: `${game.i18n.localize(\"FALEMOS.vaccinator.cancel\")}`,\n      callback: () => {\n        applyChanges = false;\n        saveCustomMacro = false;\n        saveDisableMacro = false;\n      },\n    },\n  },\ndefault:\n  \"cancel\",\n  close: (html) => {\n    if (applyChanges) {\n      let ancho = html.find('[name=\"ancho\"]')[0].value || 1;\n      let alto = html.find('[name=\"alto\"]')[0].value || 1;\n      let marizq = html.find('[name=\"marizq\"]')[0].value || 0;\n      let mararr = html.find('[name=\"mararr\"]')[0].value || 0;\n      let marder = html.find('[name=\"marder\"]')[0].value || 0;\n      let maraba = html.find('[name=\"maraba\"]')[0].value || 0;\n      let nRows = html.find('[name=\"nRows\"]')[0].value || 1;\n      let nCols = html.find('[name=\"nCols\"]')[0].value || 1;\n      let sepmin = html.find('[name=\"sepmin\"]')[0].value || 0;\n      let orden = html.find('[name=\"orden\"]')[0].value || 1;\n      let huecos = html.find('[name=\"huecos\"]')[0].value;\n      let marcos = html.find('[name=\"marcos\"]')[0].value;\n      let oveizq = html.find('[name=\"oveizq\"]')[0].value || 0;\n      let ovearr = html.find('[name=\"ovearr\"]')[0].value || 0;\n      let oveder = html.find('[name=\"oveder\"]')[0].value || 0;\n      let oveaba = html.find('[name=\"oveaba\"]')[0].value || 0;\n      let nombres = html.find('[name=\"nombres\"]')[0].value;\n      let geometria = html.find('[name=\"geometria\"]')[0].value;\n      let efecto = html.find('[name=\"efecto\"]')[0].value;\n      let fuente = html.find('[name=\"fuente\"]')[0].value;\n      let ajuste = html.find('[name=\"ajuste\"]')[0].value;\n      let fontsize = html.find('[name=\"fontsize\"]')[0].value;\n      let namecolor = html.find('[name=\"namecolor\"]')[0].value;\n\t  \n      const idimensiones = [ancho, alto];\n      const imargenes = [marizq, mararr, marder, maraba];\n      const ioverlays = [oveizq, ovearr, oveder, oveaba];\n      const irejilla = [nCols, nRows];\n      const iseparacionminima = sepmin;\n      const iordentxt = orden.split(\",\");\n      const iorden = iordentxt.map((num) => Number(num));\n      const ihuecosvaciostxt = huecos.split(\",\");\n      const ihuecosvacios = ihuecosvaciostxt.map((num) => Number(num));\n      const inames = nombres.split(\",\");\n      const imarcos = marcos.split(\",\");\n\n      let iusers = [];\n      for (let user of game.users.keys()) {\n        // console.log(game.users.get(user).data.name)\n        iusers.push(game.users.get(user).data.name);\n      }\n\n      console.log(\"---------------------------------\");\n      console.log(\"----   Falemos vaccinator   -----\");\n      console.log(\"---------------------------------\");\n      console.log(\"Dimensiones: \" + idimensiones);\n      console.log(\"Márgenes: \" + imargenes);\n      console.log(\"Rejilla: \" + irejilla);\n      console.log(\"Overlays del marco: \" + ioverlays);\n      console.log(\"Separación mínima: \" + iseparacionminima);\n      console.log(\"Marcos: \" + imarcos);\n      console.log(\"Huecos vacíos: \" + ihuecosvacios);\n      console.log(\"Usuarios: \" + iusers);\n      console.log(\"Nombres: \" + inames);\n      console.log(\"Orden jugadores: \" + iorden);\n      console.log(\"Número de jugadores: \" + numeroJugadores);\n      console.log(\"Nombres de jugadores: \" + nombresJugadores);\n\t  \n\t    console.log(\"Ocultar navegación: \" + html.find('[name=\"cbnavigation\"]')[0].checked);\n\t    console.log(\"Ocultar controles: \" + html.find('[name=\"cbcontrols\"]')[0].checked);\n\t    console.log(\"Ocultar jugadores: \" + html.find('[name=\"cbplayers\"]')[0].checked);\n\t    console.log(\"Ocultar barra: \" + html.find('[name=\"cbsidebar\"]')[0].checked);\n\t    console.log(\"Ocultar atajos: \" + html.find('[name=\"cbhotbar\"]')[0].checked);\n\n      console.log(\"---------------------------------\");\n\n      let resultadofinal = falemosCalculator(\n          idimensiones,\n          imargenes,\n          irejilla,\n          ioverlays,\n          iseparacionminima,\n          ihuecosvacios,\n          iusers,\n          inames,\n          iorden);\n\n      console.log(\"Resultado final: \");\n      console.log(resultadofinal);\n      console.log(\"---------------------------------\");\n\n      // calculos del tamaño de fuente, en base a la longitud del texto del usuario y el hueco disponible (el ancho del marco)\n      const porcNombre = 75;\n      let xNombre;\n      let yNombre;\n      let cName;\n      let sNombre;\n      let nMarco;\n      let sceneData1 = {};\n\n      const ljug = inames.map((num) => num.length);\n\n      inames[0] === \"\" && inames.length === 1\n       ? (sNombre = null)\n       : (sNombre =\n          ((resultadofinal[0][14] / Math.max(...ljug)) * porcNombre * 2) /\n        100);\n\n      let newfontsize;\n      fontsize === \"0\" || fontsize === \"\"\n       ? (newfontsize = sNombre)\n       : (newfontsize = fontsize);\n\n      for (let i = 0; i < resultadofinal.length; i++) {\n        cName = resultadofinal[i][18];\n\n        cName === undefined\n         ? (xNombre = null)\n         : (xNombre =\n            100 * (1 - porcNombre / 100) * 0.5 +\n            ((1 - cName.length / Math.max(...ljug)) * porcNombre) / 2);\n\n        cName === undefined\n         ? (yNombre = null)\n         : (yNombre = 100 + Number(oveaba));\n\n        if (imarcos.length === 1) {\n          nMarco = imarcos[0];\n        } else {\n          i < imarcos.length ? (nMarco = imarcos[i]) : (nMarco = \"\");\n        }\n\n        sceneData1[i.toString()] = {\n          x: resultadofinal[i][12],\n          y: resultadofinal[i][13],\n          width: resultadofinal[i][14],\n          overlayImg: nMarco,\n          overlayLeft: Number(ioverlays[0]),\n          overlayRight: Number(ioverlays[2]),\n          overlayTop: Number(ioverlays[1]),\n          overlayBottom: Number(ioverlays[3]),\n          geometry: geometria,\n          filter: efecto,\n          cameraName: cName,\n          cameraNameOffsetX: xNombre,\n          cameraNameOffsetY: yNombre,\n          cameraNameFontSize: newfontsize,\n          cameraNameColor: namecolor,\n          cameraNameFont: fuente,\n          fit: ajuste,\n        };\n      }\n\t  \n      let sceneData2 = {\n        enable: true,\n        hide: {\n          navigation: html.find('[name=\"cbnavigation\"]')[0].checked,\n          controls: html.find('[name=\"cbcontrols\"]')[0].checked,\n          players: html.find('[name=\"cbplayers\"]')[0].checked,\n          sidebar: html.find('[name=\"cbsidebar\"]')[0].checked,\n          hotbar: html.find('[name=\"cbhotbar\"]')[0].checked,\n        },\n      };\n\n      let sceneData = {\n        ...sceneData1,\n        ...sceneData2\n      };\n\n      console.log(\"Datos de la escena:\");\n      console.log(sceneData);\n      console.log(\"---------------------------------\");\n      console.log(\"---------------------------------\");\n\n      game.falemos.putSceneConfig(null, JSON.stringify(sceneData));\n      if (saveCustomMacro)\n        game.falemos.sceneConfigToMacro(game.scenes.viewed.data._id, sceneData);\n    }\n    if (saveDisableMacro) {\n      let sceneDataDisable = {\n        enable: false,\n        hide: {\n          navigation: false,\n          controls: false,\n          players: false,\n          sidebar: false,\n          hotbar: false,\n        },\n      };\n\t  \n      console.log(\"Datos de la escena:\");\n      console.log(sceneDataDisable);\n      console.log(\"---------------------------------\");\n      console.log(\"---------------------------------\");\n      game.falemos.sceneConfigToMacro(game.scenes.viewed.data._id, sceneDataDisable);\n    }\n  },\n}, myDialogOptions2).render(true);","folder":null,"sort":700000,"flags":{"falemos":{"vaccinatorVersion":0}},"ownership":{"default":0,"NLu8dzFBI3Kvrwky":3},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}
